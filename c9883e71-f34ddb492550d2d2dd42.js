/*! For license information please see c9883e71-f34ddb492550d2d2dd42.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"2itT":function(e,t,n){"use strict";n.d(t,"a",(function(){return nr}));var r,a=n("ReuC"),i=n("JX7q"),s=n("Ji7U"),o=n("md7G"),u=n("foSv"),c=n("ODXe"),l=n("HaE+"),h=n("1OyB"),p=n("vuIU"),f=n("KQm4"),d=n("rePB"),v=(n("ToJy"),n("p532"),n("o0o1")),b=n.n(v),m=n("H9WU"),k=n("VgbX"),y=n("mrSG"),g=n("T8El"),O=n("/6Yf");function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}function w(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(){return Object(d.a)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var x=j,T=new m.b("auth","Firebase",j()),E=new g.b("@firebase/auth");function R(e){if(E.logLevel<=g.a.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];E.error.apply(E,["Auth (".concat(k.b,"): ").concat(e)].concat(n))}}function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw A.apply(void 0,[e].concat(n))}function P(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return A.apply(void 0,[e].concat(n))}function N(e,t,n){var r=Object.assign(Object.assign({},x()),Object(d.a)({},t,n));return new m.b("auth","Firebase",r).create(t,{appName:e.name})}function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!=typeof e){var a,i=n[0],s=Object(f.a)(n.slice(1));return s[0]&&(s[0].appName=e.name),(a=e._errorFactory).create.apply(a,[i].concat(Object(f.a)(s)))}return T.create.apply(T,[e].concat(n))}function C(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];throw A.apply(void 0,[t].concat(r))}}function L(e){var t="INTERNAL ASSERTION FAILED: "+e;throw R(t),new Error(t)}function M(e,t){e||L(t)}var D=new Map;function U(e){M(e instanceof Function,"Expected a class definition");var t=D.get(e);return t?(M(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,D.set(e,t),t)}function F(e,t){var n=Object(k.i)(e,"auth");if(n.isInitialized()){var r=n.getImmediate(),a=n.getOptions();if(Object(m.f)(a,null!=t?t:{}))return r;S(r,"already-initialized")}return n.initialize({options:t})}function V(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function W(){return"http:"===z()||"https:"===z()}function z(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var H=function(){function e(t,n){Object(h.a)(this,e),this.shortDelay=t,this.longDelay=n,M(n>t,"Short delay should be less than long delay!"),this.isMobile=Object(m.m)()||Object(m.n)()}return Object(p.a)(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(W()||Object(m.j)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function q(e,t){M(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var K=function(){function e(){Object(h.a)(this,e)}return Object(p.a)(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void L("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void L("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void L("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),G=(r={},Object(d.a)(r,"CREDENTIAL_MISMATCH","custom-token-mismatch"),Object(d.a)(r,"MISSING_CUSTOM_TOKEN","internal-error"),Object(d.a)(r,"INVALID_IDENTIFIER","invalid-email"),Object(d.a)(r,"MISSING_CONTINUE_URI","internal-error"),Object(d.a)(r,"INVALID_PASSWORD","wrong-password"),Object(d.a)(r,"MISSING_PASSWORD","internal-error"),Object(d.a)(r,"EMAIL_EXISTS","email-already-in-use"),Object(d.a)(r,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Object(d.a)(r,"INVALID_IDP_RESPONSE","invalid-credential"),Object(d.a)(r,"INVALID_PENDING_TOKEN","invalid-credential"),Object(d.a)(r,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Object(d.a)(r,"MISSING_REQ_TYPE","internal-error"),Object(d.a)(r,"EMAIL_NOT_FOUND","user-not-found"),Object(d.a)(r,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Object(d.a)(r,"EXPIRED_OOB_CODE","expired-action-code"),Object(d.a)(r,"INVALID_OOB_CODE","invalid-action-code"),Object(d.a)(r,"MISSING_OOB_CODE","internal-error"),Object(d.a)(r,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Object(d.a)(r,"INVALID_ID_TOKEN","invalid-user-token"),Object(d.a)(r,"TOKEN_EXPIRED","user-token-expired"),Object(d.a)(r,"USER_NOT_FOUND","user-token-expired"),Object(d.a)(r,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Object(d.a)(r,"INVALID_CODE","invalid-verification-code"),Object(d.a)(r,"INVALID_SESSION_INFO","invalid-verification-id"),Object(d.a)(r,"INVALID_TEMPORARY_PROOF","invalid-credential"),Object(d.a)(r,"MISSING_SESSION_INFO","missing-verification-id"),Object(d.a)(r,"SESSION_EXPIRED","code-expired"),Object(d.a)(r,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Object(d.a)(r,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Object(d.a)(r,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Object(d.a)(r,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Object(d.a)(r,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Object(d.a)(r,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Object(d.a)(r,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Object(d.a)(r,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Object(d.a)(r,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Object(d.a)(r,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Object(d.a)(r,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),r),J=new H(3e4,6e4);function B(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function X(e,t,n,r){return Y.apply(this,arguments)}function Y(){return(Y=Object(l.a)(b.a.mark((function e(t,n,r,a){var i,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>4&&void 0!==s[4]?s[4]:{},e.abrupt("return",$(t,i,(function(){var e={},i={};a&&("GET"===n?i=a:e={body:JSON.stringify(a)});var s=Object(m.o)(Object.assign({key:t.config.apiKey},i)).slice(1),o=new(K.headers());return o.set("Content-Type","application/json"),o.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&o.set("X-Firebase-Locale",t.languageCode),K.fetch()(te(t,t.config.apiHost,r,s),Object.assign({method:n,headers:o,referrerPolicy:"no-referrer"},e))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,n){return Z.apply(this,arguments)}function Z(){return(Z=Object(l.a)(b.a.mark((function e(t,n,r){var a,i,s,o,u,l,h,p,f,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,a=Object.assign(Object.assign({},G),n),e.prev=2,i=new ne(t),e.next=6,Promise.race([r(),i.promise]);case 6:return s=e.sent,i.clearNetworkTimeout(),e.next=10,s.json();case 10:if(!("needConfirmation"in(o=e.sent))){e.next=13;break}throw re(t,"account-exists-with-different-credential",o);case 13:if(!s.ok||"errorMessage"in o){e.next=17;break}return e.abrupt("return",o);case 17:if(u=s.ok?o.errorMessage:o.error.message,l=u.split(" : "),h=Object(c.a)(l,2),p=h[0],f=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==p){e.next=23;break}throw re(t,"credential-already-in-use",o);case 23:if("EMAIL_EXISTS"!==p){e.next=25;break}throw re(t,"email-already-in-use",o);case 25:if(d=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=30;break}throw N(t,d,f);case 30:S(t,d);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof m.c)){e.next=37;break}throw e.t0;case 37:S(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function Q(e,t,n,r){return ee.apply(this,arguments)}function ee(){return(ee=Object(l.a)(b.a.mark((function e(t,n,r,a){var i,s,o=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>4&&void 0!==o[4]?o[4]:{},e.next=3,X(t,n,r,a,i);case 3:return"mfaPendingCredential"in(s=e.sent)&&S(t,"multi-factor-auth-required",{serverResponse:s}),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t,n,r){var a="".concat(t).concat(n,"?").concat(r);return e.config.emulator?q(e.config,a):"".concat(e.config.apiScheme,"://").concat(a)}var ne=function(){function e(t){var n=this;Object(h.a)(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(P(n.auth,"timeout"))}),J.get())}))}return Object(p.a)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function re(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var a=P(e,t,r);return a.customData._tokenResponse=n,a}function ae(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(l.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t){return oe.apply(this,arguments)}function oe(){return(oe=Object(l.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ce(){return(ce=Object(l.a)(b.a.mark((function e(t){var n,r,a,i,s,o,u=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=Object(m.h)(t),e.next=4,r.getIdToken(n);case 4:return a=e.sent,C((i=he(a))&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error"),s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider,e.abrupt("return",{claims:i,token:a,authTime:ue(le(i.auth_time)),issuedAtTime:ue(le(i.iat)),expirationTime:ue(le(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e){return 1e3*Number(e)}function he(e){var t=e.split("."),n=Object(c.a)(t,3),r=n[0],a=n[1],i=n[2];if(void 0===r||void 0===a||void 0===i)return R("JWT malformed, contained fewer than 3 sections"),null;try{var s=Object(m.d)(a);return s?JSON.parse(s):(R("Failed to decode base64 JWT payload"),null)}catch(o){return R("Caught error parsing JWT payload as JSON",o),null}}function pe(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Object(l.a)(b.a.mark((function e(t,n){var r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof m.c&&de(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function de(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var ve=function(){function e(t){Object(h.a)(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}var t;return Object(p.a)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Object(l.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:(t=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return t.apply(this,arguments)})}]),e}(),be=function(){function e(t,n){Object(h.a)(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Object(p.a)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ue(this.lastLoginAt),this.creationTime=ue(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function me(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(l.a)(b.a.mark((function e(t){var n,r,a,i,s,o,u,c,l,h,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,e.next=6,pe(t,se(r,{idToken:a}));case 6:C(null==(i=e.sent)?void 0:i.users.length,r,"internal-error"),s=i.users[0],t._notifyReloadListener(s),o=(null===(n=s.providerUserInfo)||void 0===n?void 0:n.length)?Oe(s.providerUserInfo):[],u=ge(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash||(null==u?void 0:u.length)),h=!!c&&l,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new be(s.createdAt,s.lastLoginAt),isAnonymous:h},Object.assign(t,p);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){return(ye=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(m.h)(t),e.next=3,me(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Object(f.a)(n),Object(f.a)(t))}function Oe(e){return e.map((function(e){var t=e.providerId,n=Object(y.d)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function _e(e,t){return we.apply(this,arguments)}function we(){return(we=Object(l.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t,{},(function(){var e=Object(m.o)({grant_type:"refresh_token",refresh_token:n}).slice(1),r=t.config,a=r.tokenApiHost,i=r.apiKey,s=te(t,a,"/v1/token","key=".concat(i));return K.fetch()(s,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:e})}));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ie=function(){function e(){Object(h.a)(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}var t,n;return Object(p.a)(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){C(e.idToken,"internal-error"),C(void 0!==e.idToken,"internal-error"),C(void 0!==e.refreshToken,"internal-error");var t,n,r="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(t=e.idToken,C(n=he(t),"internal-error"),C(void 0!==n.exp,"internal-error"),C(void 0!==n.iat,"internal-error"),Number(n.exp)-Number(n.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}},{key:"getToken",value:(n=Object(l.a)(b.a.mark((function e(t){var n,r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],C(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:(t=Object(l.a)(b.a.mark((function e(t,n){var r,a,i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t,n);case 2:r=e.sent,a=r.accessToken,i=r.refreshToken,s=r.expiresIn,this.updateTokensAndExpiration(a,i,Number(s));case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return L("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,a=n.accessToken,i=n.expirationTime,s=new e;return r&&(C("string"==typeof r,"internal-error",{appName:t}),s.refreshToken=r),a&&(C("string"==typeof a,"internal-error",{appName:t}),s.accessToken=a),i&&(C("number"==typeof i,"internal-error",{appName:t}),s.expirationTime=i),s}}]),e}();function je(e,t){C("string"==typeof e||void 0===e,"internal-error",{appName:t})}var xe=function(){function e(t){Object(h.a)(this,e);var n=t.uid,r=t.auth,a=t.stsTokenManager,i=Object(y.d)(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ve(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.metadata=new be(i.createdAt||void 0,i.lastLoginAt||void 0)}var t,n,r,a;return Object(p.a)(e,[{key:"getIdToken",value:(a=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(C(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getIdTokenResult",value:function(e){return function(e){return ce.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ye.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(C(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){C(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:(r=Object(l.a)(b.a.mark((function e(t){var n,r,a=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]&&a[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,me(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"delete",value:(n=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,pe(this,ae(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,a,i,s,o,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,p=null!==(a=n.email)&&void 0!==a?a:void 0,f=null!==(i=n.phoneNumber)&&void 0!==i?i:void 0,d=null!==(s=n.photoURL)&&void 0!==s?s:void 0,v=null!==(o=n.tenantId)&&void 0!==o?o:void 0,b=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,k=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,y=n.uid,g=n.emailVerified,O=n.isAnonymous,_=n.providerData,w=n.stsTokenManager;C(y&&w,t,"internal-error");var I=Ie.fromJSON(this.name,w);C("string"==typeof y,t,"internal-error"),je(h,t.name),je(p,t.name),C("boolean"==typeof g,t,"internal-error"),C("boolean"==typeof O,t,"internal-error"),je(f,t.name),je(d,t.name),je(v,t.name),je(b,t.name),je(m,t.name),je(k,t.name);var j=new e({uid:y,auth:t,email:p,emailVerified:g,displayName:h,isAnonymous:O,photoURL:d,phoneNumber:f,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:k});return _&&Array.isArray(_)&&(j.providerData=_.map((function(e){return Object.assign({},e)}))),b&&(j._redirectEventId=b),j}},{key:"_fromIdTokenResponse",value:(t=Object(l.a)(b.a.mark((function t(n,r){var a,i,s,o=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>2&&void 0!==o[2]&&o[2],(i=new Ie).updateFromServerResponse(r),s=new e({uid:r.localId,auth:n,stsTokenManager:i,isAnonymous:a}),t.next=6,me(s);case 6:return t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)}))),function(e,n){return t.apply(this,arguments)})}]),e}(),Te=function(){function e(){Object(h.a)(this,e),this.type="NONE",this.storage={}}var t,n,r,a;return Object(p.a)(e,[{key:"_isAvailable",value:(a=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"_set",value:(r=Object(l.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"_get",value:(n=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_remove",value:(t=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Te.type="NONE";var Ee=Te;function Re(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Se=function(){function e(t,n,r){Object(h.a)(this,e),this.persistence=t,this.auth=n,this.userKey=r;var a=this.auth,i=a.config,s=a.name;this.fullUserKey=Re(this.userKey,i.apiKey,s),this.fullPersistenceKey=Re("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}var t,n,r;return Object(p.a)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:(r=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?xe._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:(n=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:(t=Object(l.a)(b.a.mark((function t(n,r){var a,i,s,o,u,c,h,p,f,d,v,m=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(U(Ee),n,a));case 3:return t.next=5,Promise.all(r.map(function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:i=t.sent.filter((function(e){return e})),s=i[0]||U(Ee),o=Re(a,n.config.apiKey,n.name),u=null,c=w(r),t.prev=10,c.s();case 12:if((h=c.n()).done){t.next=29;break}return p=h.value,t.prev=14,t.next=17,p._get(o);case 17:if(!(f=t.sent)){t.next=23;break}return d=xe._fromJSON(n,f),p!==s&&(u=d),s=p,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(v=i.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(s,n,a));case 40:if(s=v[0],!u){t.next=44;break}return t.next=44,s._set(o,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===s){e.next=8;break}return e.prev=1,e.next=4,t._remove(o);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(s,n,a));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])}))),function(e,n){return t.apply(this,arguments)})}]),e}();function Pe(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Le(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ne(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(De(t))return"Blackberry";if(Ue(t))return"Webos";if(Ae(t))return"Safari";if((t.includes("chrome/")||Ce(t))&&!t.includes("edge/"))return"Chrome";if(Me(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.i)();return/firefox\//i.test(e)}function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.i)(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.i)();return/crios\//i.test(e)}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.i)();return/iemobile/i.test(e)}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.i)();return/android/i.test(e)}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.i)();return/blackberry/i.test(e)}function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.i)();return/webos/i.test(e)}function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.i)();return/iphone|ipad|ipod/i.test(e)}function Ve(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.i)();return Fe(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function We(){return Object(m.l)()&&10===document.documentMode}function ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.i)();return Fe(e)||Me(e)||Ue(e)||De(e)||/windows phone/i.test(e)||Le(e)}function He(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Pe(Object(m.i)());break;case"Worker":t="".concat(Pe(Object(m.i)()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(k.b,"/").concat(r)}var qe=function(){function e(t,n){Object(h.a)(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ge(this),this.idTokenSubscription=new Ge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=T,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}var t,n,r,a,i,s,o,u,c,f,d,v,k;return Object(p.a)(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=U(t)),this._initializationPromise=this.queue(Object(l.a)(b.a.mark((function r(){var a;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Se.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(a=n._popupRedirectResolver)||void 0===a?void 0:a._shouldInitProactively)){r.next=10;break}return r.next=10,n._popupRedirectResolver._initialize(n);case 10:return r.next=12,n.initializeCurrentUser(t);case 12:if(!n._deleted){r.next=14;break}return r.abrupt("return");case 14:n._isInitialized=!0;case 15:case"end":return r.stop()}}),r)})))),this._initializationPromise}},{key:"_onStorageEvent",value:(k=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"initializeCurrentUser",value:(v=Object(l.a)(b.a.mark((function e(t){var n,r,a,i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return a=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,i=null==r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:s=e.sent,a&&a!==i||!(null==s?void 0:s.user)||(r=s.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return C(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"tryRedirectSignIn",value:(d=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(e){return d.apply(this,arguments)})},{key:"reloadAndSetCurrentUserOrClear",value:(f=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return f.apply(this,arguments)})},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:(c=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"updateCurrentUser",value:(u=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Object(m.h)(t):null)&&C(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"_updateCurrentUser",value:(o=Object(l.a)(b.a.mark((function e(t){var n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&C(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"signOut",value:(s=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"setPersistence",value:function(e){var t=this;return this.queue(Object(l.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(U(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new m.b("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:(i=Object(l.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"getOrInitRedirectPersistenceManager",value:(a=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return C(n=t&&U(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Se.create(this,[U(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"_redirectUserForId",value:(r=Object(l.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_persistUserIfCurrent",value:(n=Object(l.a)(b.a.mark((function e(t){var n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var a=this;if(this._deleted)return function(){};var i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return C(s,this,"internal-error"),s.then((function(){return i(a.currentUser)})),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:(t=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return C(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=He(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getSdkClientVersion",value:function(){return this.clientVersion}}]),e}();function Ke(e){return Object(m.h)(e)}var Ge=function(){function e(t){var n=this;Object(h.a)(this,e),this.auth=t,this.observer=null,this.addObserver=Object(m.e)((function(e){return n.observer=e}))}return Object(p.a)(e,[{key:"next",get:function(){return C(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();var Je=function(){function e(t,n){Object(h.a)(this,e),this.providerId=t,this.signInMethod=n}return Object(p.a)(e,[{key:"toJSON",value:function(){return L("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return L("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return L("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return L("not implemented")}}]),e}();function Be(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(l.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e,t){return $e.apply(this,arguments)}function $e(){return($e=Object(l.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(t,"POST","/v1/accounts:signInWithPassword",B(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(l.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(t,"POST","/v1/accounts:signInWithEmailLink",B(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=Object(l.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(t,"POST","/v1/accounts:signInWithEmailLink",B(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nt=function(e){Object(s.a)(a,e);var t,n,r=_(a);function a(e,t,n){var i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(h.a)(this,a),(i=r.call(this,"password",n))._email=e,i._password=t,i._tenantId=s,i}return Object(p.a)(a,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:(n=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ye(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ze(t,{email:this._email,oobCode:this._password}));case 5:S(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_linkToIdToken",value:(t=Object(l.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Be(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",et(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:S(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new a(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new a(e,t,"emailLink",n)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),a}(Je);function rt(e,t){return at.apply(this,arguments)}function at(){return(at=Object(l.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(t,"POST","/v1/accounts:signInWithIdp",B(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var it=function(e){Object(s.a)(n,e);var t=_(n);function n(){var e;return Object(h.a)(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Object(p.a)(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return rt(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,rt(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,rt(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Object(m.o)(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):S("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,a=t.signInMethod,i=Object(y.d)(t,["providerId","signInMethod"]);if(!r||!a)return null;var s=new n(r,a);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}}]),n}(Je);function st(e,t){return ot.apply(this,arguments)}function ot(){return(ot=Object(l.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X(t,"POST","/v1/accounts:sendVerificationCode",B(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(){return(ut=Object(l.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(t,"POST","/v1/accounts:signInWithPhoneNumber",B(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(){return(ct=Object(l.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t,"POST","/v1/accounts:signInWithPhoneNumber",B(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw re(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lt=Object(d.a)({},"USER_NOT_FOUND","user-not-found");function ht(){return(ht=Object(l.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Q(t,"POST","/v1/accounts:signInWithPhoneNumber",B(t,r),lt));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pt=function(e){Object(s.a)(n,e);var t=_(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Object(p.a)(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return ut.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ct.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ht.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,a=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:a}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,a=t.verificationCode,i=t.phoneNumber,s=t.temporaryProof;return a||r||i||s?new n({verificationId:r,verificationCode:a,phoneNumber:i,temporaryProof:s}):null}}]),n}(Je);var ft=function(){function e(t){var n,r,a,i,s,o;Object(h.a)(this,e);var u=Object(m.p)(Object(m.g)(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,p=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(a=u.mode)&&void 0!==a?a:null);C(c&&l&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=u.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=u.tenantId)&&void 0!==o?o:null}return Object(p.a)(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Object(m.p)(Object(m.g)(e)).link,n=t?Object(m.p)(Object(m.g)(t)).deep_link_id:null,r=Object(m.p)(Object(m.g)(e)).deep_link_id;return(r?Object(m.p)(Object(m.g)(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var dt=function(){function e(){Object(h.a)(this,e),this.providerId=e.PROVIDER_ID}return Object(p.a)(e,null,[{key:"credential",value:function(e,t){return nt._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ft.parseLink(t);return C(n,"argument-error"),nt._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();dt.PROVIDER_ID="password",dt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",dt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var vt=function(){function e(t){Object(h.a)(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Object(p.a)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),bt=function(e){Object(s.a)(n,e);var t=_(n);function n(){var e;return Object(h.a)(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Object(p.a)(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Object(f.a)(this.scopes)}}]),n}(vt),mt=function(e){Object(s.a)(n,e);var t=_(n);function n(){return Object(h.a)(this,n),t.call(this,"facebook.com")}return Object(p.a)(n,null,[{key:"credential",value:function(e){return it._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(bt);mt.FACEBOOK_SIGN_IN_METHOD="facebook.com",mt.PROVIDER_ID="facebook.com";var kt=function(e){Object(s.a)(n,e);var t=_(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Object(p.a)(n,null,[{key:"credential",value:function(e,t){return it._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,a=t.oauthAccessToken;if(!r&&!a)return null;try{return n.credential(r,a)}catch(i){return null}}}]),n}(bt);kt.GOOGLE_SIGN_IN_METHOD="google.com",kt.PROVIDER_ID="google.com";var yt=function(e){Object(s.a)(n,e);var t=_(n);function n(){return Object(h.a)(this,n),t.call(this,"github.com")}return Object(p.a)(n,null,[{key:"credential",value:function(e){return it._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(bt);yt.GITHUB_SIGN_IN_METHOD="github.com",yt.PROVIDER_ID="github.com";var gt=function(e){Object(s.a)(n,e);var t=_(n);function n(){return Object(h.a)(this,n),t.call(this,"twitter.com")}return Object(p.a)(n,null,[{key:"credential",value:function(e,t){return it._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,a=t.oauthTokenSecret;if(!r||!a)return null;try{return n.credential(r,a)}catch(i){return null}}}]),n}(bt);gt.TWITTER_SIGN_IN_METHOD="twitter.com",gt.PROVIDER_ID="twitter.com";var Ot=function(){function e(t){Object(h.a)(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}var t,n;return Object(p.a)(e,null,[{key:"_fromIdTokenResponse",value:(n=Object(l.a)(b.a.mark((function t(n,r,a){var i,s,o,u,c=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.length>3&&void 0!==c[3]&&c[3],t.next=3,xe._fromIdTokenResponse(n,a,i);case 3:return s=t.sent,o=_t(a),u=new e({user:s,providerId:o,_tokenResponse:a,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"_forOperation",value:(t=Object(l.a)(b.a.mark((function t(n,r,a){var i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(a,!0);case 2:return i=_t(a),t.abrupt("return",new e({user:n,providerId:i,_tokenResponse:a,operationType:r}));case 4:case"end":return t.stop()}}),t)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}();function _t(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var wt=function(e){Object(s.a)(n,e);var t=_(n);function n(e,r,a,s){var o,u;return Object(h.a)(this,n),(o=t.call(this,r.code,r.message)).operationType=a,o.user=s,o.name="FirebaseError",Object.setPrototypeOf(Object(i.a)(o),n.prototype),o.appName=e.name,o.code=r.code,o.tenantId=null!==(u=e.tenantId)&&void 0!==u?u:void 0,o.serverResponse=r.customData.serverResponse,o}return Object(p.a)(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,a){return new n(e,t,r,a)}}]),n}(m.c);function It(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw wt._fromErrorAndOperation(e,n,t,r);throw n}))}function jt(e,t){return xt.apply(this,arguments)}function xt(){return(xt=Object(l.a)(b.a.mark((function e(t,n){var r,a,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],e.t0=pe,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return a=e.sent,e.abrupt("return",Ot._forOperation(t,"link",a));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tt(e,t){return Et.apply(this,arguments)}function Et(){return(Et=Object(l.a)(b.a.mark((function e(t,n){var r,a,i,s,o,u,c=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],a=t.auth,i="reauthenticate",e.prev=3,e.next=6,pe(t,It(a,i,n,t),r);case 6:return C((s=e.sent).idToken,a,"internal-error"),C(o=he(s.idToken),a,"internal-error"),u=o.sub,C(t.uid===u,a,"user-mismatch"),e.abrupt("return",Ot._forOperation(t,i,s));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&S(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])})))).apply(this,arguments)}function Rt(e,t){return St.apply(this,arguments)}function St(){return(St=Object(l.a)(b.a.mark((function e(t,n){var r,a,i,s,o=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],a="signIn",e.next=4,It(t,a,n);case 4:return i=e.sent,e.next=7,Ot._fromIdTokenResponse(t,a,i);case 7:if(s=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(s.user);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(e,t){return X(e,"POST","/v2/accounts/mfaEnrollment:start",B(e,t))}new WeakMap;var Nt=function(){function e(t,n){Object(h.a)(this,e),this.storage=t,this.type=n}return Object(p.a)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}}]),e}();var At=function(e){Object(s.a)(o,e);var t,n,r,i=_(o);function o(){var e,t;return Object(h.a)(this,o),(e=i.call(this,window.localStorage,"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=(Ae(t=Object(m.i)())||Fe(t))&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ze(),e._shouldAllowMigration=!0,e}return Object(p.a)(o,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],a=this.storage.getItem(r),i=this.localCache[r];a!==i&&e(r,i,a)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var a=this.storage.getItem(r);if(e.newValue!==a)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var i=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},s=this.storage.getItem(r);We()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,a=Array.from(n);r<a.length;r++){(0,a[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:(r=Object(l.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)(Object(u.a)(o.prototype),"_set",this).call(this,t,n);case 2:this.localCache[t]=JSON.stringify(n);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"_get",value:(n=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)(Object(u.a)(o.prototype),"_get",this).call(this,t);case 2:return n=e.sent,this.localCache[t]=JSON.stringify(n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_remove",value:(t=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)(Object(u.a)(o.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),o}(Nt);At.type="LOCAL";var Ct=At,Lt=function(e){Object(s.a)(n,e);var t=_(n);function n(){return Object(h.a)(this,n),t.call(this,window.sessionStorage,"SESSION")}return Object(p.a)(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Nt);Lt.type="SESSION";var Mt=Lt;function Dt(e){return Promise.all(e.map(function(){var e=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ut=function(){function e(t){Object(h.a)(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}var t;return Object(p.a)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:(t=Object(l.a)(b.a.mark((function e(t){var n,r,a,i,s,o,u,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,a=r.eventId,i=r.eventType,s=r.data,null==(o=this.handlersMap[i])?void 0:o.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:a,eventType:i}),u=Array.from(o).map(function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,s));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Dt(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:c});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ft(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ut.receivers=[];var Vt=function(){function e(t){Object(h.a)(this,e),this.target=t,this.handlers=new Set}var t;return Object(p.a)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:(t=Object(l.a)(b.a.mark((function e(t,n){var r,a,i,s,o=this,u=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,a="undefined"!=typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Ft("",20);a.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);s={messageChannel:a,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),i=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),e(n.data.response);break;default:clearTimeout(l),clearTimeout(i),u(new Error("invalid_response"))}}},o.handlers.add(s),a.port1.addEventListener("message",s.onMessage),o.target.postMessage({eventType:t,eventId:c,data:n},[a.port2])})).finally((function(){s&&o.removeMessageHandler(s)})));case 5:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})}]),e}();function Wt(){return window}function zt(){return void 0!==Wt().WorkerGlobalScope&&"function"==typeof Wt().importScripts}function Ht(){return qt.apply(this,arguments)}function qt(){return(qt=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var Kt="firebaseLocalStorageDb",Gt=function(){function e(t){Object(h.a)(this,e),this.request=t}return Object(p.a)(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Jt(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function Bt(){var e=indexedDB.deleteDatabase(Kt);return new Gt(e).toPromise()}function Xt(){var e=indexedDB.open(Kt,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(r){n(r)}})),e.addEventListener("success",Object(l.a)(b.a.mark((function n(){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains("firebaseLocalStorage")){n.next=12;break}return r.close(),n.next=5,Bt();case 5:return n.t0=t,n.next=8,Xt();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Yt(e,t,n){return $t.apply(this,arguments)}function $t(){return($t=Object(l.a)(b.a.mark((function e(t,n,r){var a,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jt(t,!0).put((a={},Object(d.a)(a,"fbase_key",n),Object(d.a)(a,"value",r),a)),e.abrupt("return",new Gt(i).toPromise());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zt(e,t){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(l.a)(b.a.mark((function e(t,n){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jt(t,!1).get(n),e.next=3,new Gt(r).toPromise();case 3:return a=e.sent,e.abrupt("return",void 0===a?null:a.value);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function en(e,t){var n=Jt(e,!0).delete(t);return new Gt(n).toPromise()}var tn=function(){function e(){Object(h.a)(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}var t,n,r,a,i,s,o,u,c,f,d,v;return Object(p.a)(e,[{key:"_openDb",value:(v=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Xt();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"_withRetries",value:(d=Object(l.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(e){return d.apply(this,arguments)})},{key:"initializeServiceWorkerMessaging",value:(f=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zt()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"initializeReceiver",value:(c=Object(l.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ut._getInstance(zt()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Object(l.a)(b.a.mark((function e(n,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return a=e.sent,e.abrupt("return",{keyProcessed:a.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Object(l.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"initializeSender",value:(u=Object(l.a)(b.a.mark((function e(){var t,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Vt(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"notifyServiceWorker",value:(o=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&(n=void 0,((null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)===this.activeServiceWorker)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}var n}),e,this,[[2,7]])}))),function(e){return o.apply(this,arguments)})},{key:"_isAvailable",value:(s=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Xt();case 5:return t=e.sent,e.next=8,Yt(t,"__sak","1");case 8:return e.next=10,en(t,"__sak");case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),function(){return s.apply(this,arguments)})},{key:"_withPendingWrite",value:(i=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])}))),function(e){return i.apply(this,arguments)})},{key:"_set",value:(a=Object(l.a)(b.a.mark((function e(t,n){var r=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Yt(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"_get",value:(r=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Zt(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_remove",value:(n=Object(l.a)(b.a.mark((function e(t){var n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return en(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_poll",value:(t=Object(l.a)(b.a.mark((function e(){var t,n,r,a,i,s,o,u,c,l,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Jt(e,!1).getAll();return new Gt(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,a=w(t);try{for(a.s();!(i=a.n()).done;)s=i.value,o=s.fbase_key,u=s.value,r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o))}catch(p){a.e(p)}finally{a.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,a=Array.from(n);r<a.length;r++){(0,a[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Object(l.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();tn.type="LOCAL";var nn=tn;function rn(e,t){return X(e,"POST","/v2/accounts/mfaSignIn:start",B(e,t))}function an(e){return new Promise((function(t,n){var r,a,i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=function(e){var t=P("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",(null!==(a=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==a?a:document).appendChild(i)}))}function sn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}sn("rcb"),new H(3e4,6e4);function on(e,t,n){return un.apply(this,arguments)}function un(){return(un=Object(l.a)(b.a.mark((function e(t,n,r){var a,i,s,o,u,c,l,h,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(i=e.sent,e.prev=3,C("string"==typeof i,t,"argument-error"),C("recaptcha"===r.type,t,"argument-error"),!("session"in(s="string"==typeof n?{phoneNumber:n}:n))){e.next=26;break}if(o=s.session,!("phoneNumber"in s)){e.next=17;break}return C("enroll"===o.type,t,"internal-error"),e.next=13,Pt(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return C("signin"===o.type,t,"internal-error"),C(c=(null===(a=s.multiFactorHint)||void 0===a?void 0:a.uid)||s.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,rn(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,st(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});case 28:return h=e.sent,p=h.sessionInfo,e.abrupt("return",p);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])})))).apply(this,arguments)}var cn=function(){function e(t){Object(h.a)(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ke(t)}return Object(p.a)(e,[{key:"verifyPhoneNumber",value:function(e,t){return on(this.auth,e,Object(m.h)(t))}}],[{key:"credential",value:function(e,t){return pt._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?pt._fromTokenResponse(n,r):null}}]),e}();function ln(e,t){return t?U(t):(C(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}cn.PROVIDER_ID="phone",cn.PHONE_SIGN_IN_METHOD="phone";var hn=function(e){Object(s.a)(n,e);var t=_(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Object(p.a)(n,[{key:"_getIdTokenResponse",value:function(e){return rt(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return rt(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return rt(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Je);function pn(e){return Rt(e.auth,new hn(e),e.bypassAuthState)}function fn(e){var t=e.auth,n=e.user;return C(n,t,"internal-error"),Tt(n,new hn(e),e.bypassAuthState)}function dn(e){return vn.apply(this,arguments)}function vn(){return(vn=Object(l.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,C(r=t.user,n,"internal-error"),e.abrupt("return",jt(r,new hn(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bn=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(h.a)(this,e),this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}var t;return Object(p.a)(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Object(l.a)(b.a.mark((function t(n,r){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:(t=Object(l.a)(b.a.mark((function e(t){var n,r,a,i,s,o,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,a=t.postBody,i=t.tenantId,s=t.error,o=t.type,!s){e.next=4;break}return this.reject(s),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(o)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(e){return t.apply(this,arguments)})},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pn;case"linkViaPopup":case"linkViaRedirect":return dn;case"reauthViaPopup":case"reauthViaRedirect":return fn;default:S(this.auth,"internal-error")}}},{key:"resolve",value:function(e){M(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){M(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),mn=new H(2e3,1e4);var kn=function(e){Object(s.a)(a,e);var t,n,r=_(a);function a(e,t,n,s,o){var u;return Object(h.a)(this,a),(u=r.call(this,e,t,s,o)).provider=n,u.authWindow=null,u.pollId=null,a.currentPopupAction&&a.currentPopupAction.cancel(),a.currentPopupAction=Object(i.a)(u),u}return Object(p.a)(a,[{key:"executeNotNull",value:(n=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return C(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onExecution",value:(t=Object(l.a)(b.a.mark((function e(){var t,n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(1===this.filter.length,"Popup operations only handle one event"),t=Ft(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(P(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(P(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,a.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(P(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,mn.get())}()}}]),a}(bn);kn.currentPopupAction=null;var yn=new Map,gn=function(e){Object(s.a)(o,e);var t,n,r,i=_(o);function o(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(h.a)(this,o),(n=i.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r)).eventId=null,n}return Object(p.a)(o,[{key:"execute",value:(r=Object(l.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=yn.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,On(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Object(a.a)(Object(u.a)(o.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:n=e.t0,t=function(){return Promise.resolve(n)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:yn.set(this.auth._key(),t);case 21:return e.abrupt("return",t());case 22:case"end":return e.stop()}}),e,this,[[2,17]])}))),function(){return r.apply(this,arguments)})},{key:"onAuthEvent",value:(n=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Object(a.a)(Object(u.a)(o.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(n=e.sent)){e.next=16;break}return this.user=n,e.abrupt("return",Object(a.a)(Object(u.a)(o.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"onExecution",value:(t=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"cleanUp",value:function(){}}]),o}(bn);function On(e,t){return _n.apply(this,arguments)}function _n(){return(_n=Object(l.a)(b.a.mark((function e(t,n){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=In(n),e.next=3,wn(t)._get(r);case 3:return e.t0=e.sent,a="true"===e.t0,e.next=7,wn(t)._remove(r);case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wn(e){return U(e._redirectPersistence)}function In(e){return Re("pendingRedirect",e.config.apiKey,e.name)}function jn(e,t){return xn.apply(this,arguments)}function xn(){return(xn=Object(l.a)(b.a.mark((function e(t,n){var r,a,i,s,o,u=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],a=Ke(t),i=ln(a,n),s=new gn(a,i,r),e.next=6,s.execute();case 6:if(!(o=e.sent)||r){e.next=13;break}return delete o.user._redirectEventId,e.next=11,a._persistUserIfCurrent(o.user);case 11:return e.next=13,a._setRedirectUser(null,n);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tn=function(){function e(t){Object(h.a)(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Object(p.a)(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Rn(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(P(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(En(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(En(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function En(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Rn(e){var t=e.type,n=e.error;return"unknown"===t&&(null==n?void 0:n.code)==="auth/".concat("no-auth-event")}function Sn(e){return Pn.apply(this,arguments)}function Pn(){return(Pn=Object(l.a)(b.a.mark((function e(t){var n,r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",X(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,An=/^https?/;function Cn(){return(Cn=Object(l.a)(b.a.mark((function e(t){var n,r,a,i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Sn(t);case 4:n=e.sent,r=n.authorizedDomains,a=w(r),e.prev=7,a.s();case 9:if((i=a.n()).done){e.next=20;break}if(s=i.value,e.prev=11,!Ln(s)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),a.e(e.t1);case 25:return e.prev=25,a.f(),e.finish(25);case 28:S(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Ln(e){var t=V(),n=new URL(t),r=n.protocol,a=n.hostname;if(e.startsWith("chrome-extension://")){var i=new URL(e);return""===i.hostname&&""===a?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&i.hostname===a}if(!An.test(r))return!1;if(Nn.test(e))return a===e;var s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}var Mn=new H(3e4,6e4);function Dn(){var e=Wt().___jsl;if(null==e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Object(f.a)(e.H[r].L),e.CP)for(var a=0;a<e.CP.length;a++)e.CP[a]=null}}var Un=null;function Fn(e){return Un=Un||function(e){return new Promise((function(t,n){var r,a,i;function s(){Dn(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Dn(),n(P(e,"network-request-failed"))},timeout:Mn.get()})}if(null===(a=null===(r=Wt().gapi)||void 0===r?void 0:r.iframes)||void 0===a?void 0:a.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Wt().gapi)||void 0===i?void 0:i.load)){var o=sn("iframefcb");return Wt()[o]=function(){gapi.load?s():n(P(e,"network-request-failed"))},an("https://apis.google.com/js/api.js?onload=".concat(o))}s()}})).catch((function(e){throw Un=null,e}))}(e)}var Vn=new H(5e3,15e3),Wn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},zn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hn(e){var t=e.config;C(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?q(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:k.b},a=zn.get(e.config.apiHost);a&&(r.eid=a);var i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(Object(m.o)(r).slice(1))}function qn(e){return Kn.apply(this,arguments)}function Kn(){return(Kn=Object(l.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fn(t);case 2:return n=e.sent,C(r=Wt().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Hn(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wn,dontclear:!0},(function(e){return new Promise(function(){var n=Object(l.a)(b.a.mark((function n(r,a){var i,s,o;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=function(){Wt().clearTimeout(s),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:i=P(t,"network-request-failed"),s=Wt().setTimeout((function(){a(i)}),Vn.get()),e.ping(o).then(o,(function(){a(i)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Gn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Jn=function(){function e(t){Object(h.a)(this,e),this.window=t,this.associatedEvent=null}return Object(p.a)(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Bn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,i=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),o="",u=Object.assign(Object.assign({},Gn),{width:r.toString(),height:a.toString(),top:i,left:s}),l=Object(m.i)().toLowerCase();n&&(o=Ce(l)?"_blank":n),Ne(l)&&(t=t||"http://localhost",u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=Object(c.a)(t,2),r=n[0],a=n[1];return"".concat(e).concat(r,"=").concat(a,",")}),"");if(Ve(l)&&"_self"!==o)return Xn(t||"",o),new Jn(null);var p=window.open(t||"",o,h);C(p,e,"popup-blocked");try{p.focus()}catch(f){}return new Jn(p)}function Xn(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}function Yn(e,t,n,r,a,i){C(e.config.authDomain,e,"auth-domain-config-required"),C(e.config.apiKey,e,"invalid-api-key");var s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:k.b,eventId:a};if(t instanceof vt){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",Object(m.k)(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(var o=0,u=Object.entries(i||{});o<u.length;o++){var l=Object(c.a)(u[o],2),h=l[0],p=l[1];s[h]=p}}if(t instanceof bt){var f=t.getScopes().filter((function(e){return""!==e}));f.length>0&&(s.scopes=f.join(","))}e.tenantId&&(s.tid=e.tenantId);for(var d=s,v=0,b=Object.keys(d);v<b.length;v++){var y=b[v];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat("__/auth/handler");return q(t,"emulator/auth/handler")}(e),"?").concat(Object(m.o)(d).slice(1))}var $n=function(){function e(){Object(h.a)(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mt,this._completeRedirectFn=jn}var t,n,r;return Object(p.a)(e,[{key:"_openPopup",value:(r=Object(l.a)(b.a.mark((function e(t,n,r,a){var i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(null===(i=this.eventManagers[t._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),s=Yn(t,n,r,V(),a),e.abrupt("return",Bn(t,s,Ft()));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,n,a){return r.apply(this,arguments)})},{key:"_openRedirect",value:(n=Object(l.a)(b.a.mark((function e(t,n,r,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return i=Yn(t,n,r,V(),a),Wt().location.href=i,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var i}),e,this)}))),function(e,t,r,a){return n.apply(this,arguments)})},{key:"_initialize",value:function(e){var t=e._key();if(this.eventManagers[t]){var n=this.eventManagers[t],r=n.manager,a=n.promise;return r?Promise.resolve(r):(M(a,"If manager is not set, promise should be"),a)}var i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i}},{key:"initAndGetManager",value:(t=Object(l.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn(t);case 2:return n=e.sent,r=new Tn(t),n.register("authEvent",(function(e){return C(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send("webStorageSupport",{type:"webStorageSupport"},(function(n){var r,a=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==a&&t(!!a),S(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Cn.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ze()||Ae()||Fe()}}]),e}(),Zn=function(e){Object(s.a)(n,e);var t=_(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,"phone")).credential=e,r}return Object(p.a)(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return X(e,"POST","/v2/accounts/mfaEnrollment:finalize",B(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return X(e,"POST","/v2/accounts/mfaSignIn:finalize",B(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){Object(h.a)(this,e),this.factorId=t}return Object(p.a)(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return L("unexpected MultiFactorSessionType")}}}]),e}());(function(){function e(){Object(h.a)(this,e)}return Object(p.a)(e,null,[{key:"assertion",value:function(e){return Zn._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var Qn,er="@firebase/auth",tr=function(){function e(t){Object(h.a)(this,e),this.auth=t,this.internalListeners=new Map}var t;return Object(p.a)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:(t=Object(l.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){C(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(k.m)(),t=Object(k.i)(e,"auth");return t.isInitialized()?t.getImmediate():F(e,{popupRedirectResolver:$n,persistence:[nn,Ct,Mt]})}Qn="Browser",Object(k.j)(new O.a("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),a=r.options,i=a.apiKey,s=a.authDomain;return function(e){C(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),C(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});var t={apiKey:i,authDomain:s,clientPlatform:Qn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:He(Qn)},r=new qe(e,t);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(U);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Object(k.j)(new O.a("auth-internal",(function(e){return function(e){return new tr(e)}(Ke(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Object(k.q)(er,"0.18.3",function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Qn)),Object(k.q)(er,"0.18.3","esm2017")}}]);
//# sourceMappingURL=c9883e71-f34ddb492550d2d2dd42.js.map